# MBTI测试系统 - 手动测试指南

## 概述

本指南介绍如何使用 `manual-test-script.js` 脚本在浏览器中进行MBTI测试系统的手动测试。该脚本可以验证用户流程、数据完整性、性能表现和可访问性等多个方面。

## 前置条件

1. 确保开发服务器正在运行：
   ```bash
   npm run dev
   ```

2. 在浏览器中打开应用：http://localhost:5174/

## 测试步骤

### 1. 加载测试脚本

在浏览器中打开开发者工具（F12），切换到 Console 标签页，然后执行以下步骤：

#### 方法一：直接复制脚本内容
1. 打开 `manual-test-script.js` 文件
2. 复制整个文件内容
3. 粘贴到浏览器控制台并按回车执行

#### 方法二：通过网络加载（如果有本地服务器）
```javascript
// 如果脚本在public目录下
fetch('/manual-test-script.js')
  .then(response => response.text())
  .then(script => eval(script))
  .catch(console.error);
```

### 2. 创建测试实例

脚本加载成功后，在控制台中执行：

```javascript
const tester = new MBTIManualTester();
```

### 3. 运行测试

#### 运行所有测试（推荐）
```javascript
const report = await tester.runAllTests();
console.log('测试完成', report);
```

#### 运行单个测试
```javascript
// 检查本地存储
tester.checkLocalStorage();

// 检查Pinia状态
tester.checkPiniaState();

// 检查页面性能
tester.checkPerformance();

// 检查响应式设计
tester.checkResponsiveDesign();

// 检查可访问性
tester.checkAccessibility();

// 模拟答题流程（需要在测试页面）
await tester.simulateAnswering();
```

## 测试覆盖范围

### 1. 本地存储检查 (LocalStorage)
- 验证关键数据的存储格式
- 检查数据完整性
- 覆盖的存储键：
  - `mbti_users` - 用户数据
  - `mbti_sessions` - 测试会话
  - `mbti_answers` - 答题记录
  - `mbti_payments` - 支付记录
  - `mbti_behaviors` - 行为日志
  - `mbti_shares` - 分享记录

### 2. 状态管理检查 (Pinia)
- 验证Vue DevTools可用性
- 检查Pinia实例状态

### 3. 网络请求监控 (Network)
- 监听所有fetch请求
- 记录请求状态和响应
- 自动监控5秒钟

### 4. 控制台错误监控 (Console)
- 捕获JavaScript错误
- 记录警告信息
- 自动监控5秒钟

### 5. 用户流程模拟 (UserFlow)
- 自动查找答题选项
- 模拟点击操作
- 检查进度指示器
- **注意：需要在测试页面(/test)运行**

### 6. 性能检查 (Performance)
- 页面加载时间
- DOM内容加载时间
- 内存使用情况

### 7. 响应式设计检查 (Responsive)
- 当前视口尺寸
- 响应式CSS类检测

### 8. 可访问性检查 (Accessibility)
- 图片alt属性
- 语义化HTML标签
- 交互元素统计

## 测试结果解读

### 状态标识
- ✅ **PASS** - 测试通过
- ❌ **FAIL** - 测试失败，需要修复
- ⚠️ **WARN** - 警告，建议优化
- ℹ️ **INFO** - 信息性输出

### 测试报告
运行完成后会生成详细报告，包括：
- 测试总数和通过率
- 失败和警告的详细信息
- 测试执行时长
- 完整的测试结果数组

## 最佳实践

### 1. 测试时机
- 在不同页面运行测试（首页、测试页、结果页）
- 完成一次完整的用户流程后运行
- 代码修改后验证功能

### 2. 测试环境
- 使用不同浏览器测试
- 测试不同屏幕尺寸
- 清空本地存储后重新测试

### 3. 问题排查
- 查看控制台的详细错误信息
- 检查网络请求的响应状态
- 验证数据格式的正确性

## 常见问题

### Q: 脚本加载失败
A: 确保复制了完整的脚本内容，或检查网络加载路径是否正确。

### Q: 答题模拟无效果
A: 确保在测试页面(/test)运行，且页面已完全加载。

### Q: 本地存储无数据
A: 这是正常的，表示用户还没有进行过相关操作。

### Q: 性能警告
A: 检查是否有大量资源加载或JavaScript执行时间过长。

## 扩展测试

可以根据需要扩展测试脚本：

```javascript
// 自定义测试
tester.logResult('Custom', 'PASS', '自定义测试通过');

// 检查特定元素
const element = document.querySelector('.specific-class');
if (element) {
  tester.logResult('Element', 'PASS', '找到特定元素');
} else {
  tester.logResult('Element', 'FAIL', '未找到特定元素');
}

// 生成最终报告
const finalReport = tester.generateReport();
```

## 总结

手动测试脚本提供了一个快速、全面的测试方案，帮助开发者在开发过程中及时发现问题。建议将其作为开发流程的一部分，定期执行以确保系统质量。